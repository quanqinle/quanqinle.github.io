---
layout:       post
title:        "Linux | Vim常用操作"
subtitle:     "Vim查、增、减、移动等常用操作"
date:         2011-04-06 12:00:00
updated:      2011-04-06 12:00:00
author:       "权芹乐"
header-img:   "img/home-bg.webp"
catalog:      true
categories:
    - Linux
tags:
    - Linux
    - Vim
---

# 四种模式
vi有两种模式，`命令模式`和`插入模式`，vim作为vi的增强版多了两种模式，`普通模式`和`可视模式`。

{% mermaid graph LR %}
A(普通模式) -->|i/a...| B(插入模式)
A(普通模式) -->|shift + :| C(命令模式)
A(普通模式) -->|v/V...| D(可视模式)
B -->|Esc| A
C -->|Esc| A
D -->|Esc| A
{% endmermaid %}

可以通过底部状态行看出所处的模式：
* ①普通模式 ，打开文件后所处的就是普通模式
* ②插入模式 ，编辑文件时的模式
* ③命令模式 ，可以查找、替换等十分丰富的操作
* ④可视模式 ，可以实现光标选择整块文字的操作

<!-- more -->

各模式间的转换方法:
* ②③④==>① 按esc键 （所以，没事可以多按按esc）
* ①==>② 按i/a在光标前/后插入；按I/A在行首/尾插入；按o/O在当前行的下/上新建行；按s删除光标所在字符再插入；按S删除光标所在行再插入
* ①==>③ 按分号（shift + :）
* ①==>④ 按v可视模式visual；按V可视行模式visual line；按ctrl+v/V可视列模式visual block。

# 普通模式

+ `hjkl` 前下上后
+ `0`  跳转至本行头
+ `^`  跳转至本行前第一个非空字符
+ `g_` 跳转至本行最后一个非空字符
+ `$`  跳转至本行尾
+ `fx` 跳转至本行下一个字符x处
+ `tx` 跳转至本行字符x前一个字符
+ `1G` 跳转到第一行
+ `nG` 跳转至第n行
+ `G`  跳转到最后一行(文末)
+ `/word`  向下查找文字（按n查找下一个）
+ `?word`  向上查找文字（按n查找下一个）
+ `u`  撤销操作
+ `.`  重复上一指令
+ `ZZ` 等同于 `:wq`
+ `yy` 复制当前整行
+ `y$` 复制光标后该行内容
+ `p`  粘贴到光标的下一行
+ `d$` 删除光标后该行内容
+ `dd` 删除整行
+ `dw` 删除单词
+ `d方向键` 删除字符
+ `4dd` 删除光标行及下面4行
+ `J`  光标行与下一行合并

# 命令模式

在`:`后输入以下内容，然后回车：
+ `w`  保存，不退出。后可跟文件名
+ `wq` 保存，退出
+ `q!` 不保存，强制退出
+ `set number`   显示行号
+ `set list`     显示回车符和TAB符
+ `n1,n2 m n3`   移动n1-n2行(包括n1,n2)到n3行之下
+ `n1,n2 co n3`  复制n1-n2行(包括n1,n2)到n3行之下
+ `n1,n2 d`      删除n1-n2行(包括n1,n2)行
+ `s/a/A/`　       替换当前行找到的第一个a为A　　
+ `s/a/A/g`　      替换当前行找到的所有a为A
+ `n1,n2s/a/A/g`   替换n1~n2行间所a为A
+ `1,$s/a/A/g`     替换全文a为A
+ `%s/a/A/g`       替换全文a为A
+ `%s/\r//g`       删除行尾的`^M`

> 注意：
> 
> + n1和n2规则：为`.`时，表示`当前行`；`$`时，表示`最后一行`；
> + a和A规则：`^I`是TAB，通过直接点击TAB键输入；允许正则表达式
> + `%`等同于`1,$`






> 存稿录入，未完待续……

